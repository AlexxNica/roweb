---
name: geospatial-suite
layout: post
title: The rOpenSci geospatial suite
date: 2016-11-22
authors:
  - name: Scott Chamberlain
  - name: Stefanie Butland
categories:
  - blog
tags:
- R
- geospatial
---


Geospatial data - data embedded in a spatial context - is used across disciplines, wether it be history, biology, business, tech, government, or non-profit. Along with community contributors, we're working on a suite of tools to make working with spatial data in R as easy as possible.

<!-- use cases .... references... highlight integrations with other geospatial tools/upstream and downstream uses -->
If you're not familiar with geospatial tools, it's helpful to see what people do with them in the real world.

Example 1: xxxxx
Example 2: xxxxx
Example 3: xxxxx

[We covered](https://ropensci.org/blog/blog/2016/03/17/ropensci-geospatial-stack) the state of our geospatial tools in March this year - you may want to read that post before continuing. A lot has changed since March '16, so we thought it would be useful for us and readers to do an overview of these tools and future work.

There are [many geospatial data formats](https://en.wikipedia.org/wiki/GIS_file_formats), including [shapefile's](https://en.wikipedia.org/wiki/Shapefile), [GeoTIFF](https://en.wikipedia.org/wiki/GeoTIFF), [netCDF](https://en.wikipedia.org/wiki/NetCDF), [Well-known text/Well-known binary](https://en.wikipedia.org/wiki/Well-known_text), [GeoJSON](http://geojson.org/), and much more. Two formats in particular that we create tools for are WKT and GeoJSON. Readers may be more familiar with shape files than WKT or GeoJSON. There are already R tools for shape files, so our tools largely don't concern themselves with shape files and other geospatial data formats.

### GeoJSON

With the explosion of Javascript/Node and web first tools, and increasing dominance of JSON as a data format, [GeoJSON](http://geojson.org/) as a spatial data format has seen increasing use. GeoJSON is a lightweight format based on JSON, and has a very new standard specification: [RFC 7946][rfc7946]. Many of our geospatial tools center around GeoJSON. Our goal with GeoJSON focused tools is to create a pipeline in which users can process GeoJSON data without any headaches due to dependencies.

* GeoJSON
  * links: [specification](https://tools.ietf.org/html/rfc7946) - [Wikipedia entry](https://en.wikipedia.org/wiki/GeoJSON)
  * GeoJSON was inspired in part from Simple Features, but is not part of that specification. The most recent iteration is called [RFC 7946 GeoJSON](https://tools.ietf.org/html/rfc7946).
  * Features of note:
    * JSON character representation only (though see [geobuf](https://github.com/mapbox/geobuf) for binary GeoJSON - not part of RFC 7946)
    * All data is WGS84
    * Often found in web applications


### WKT

Well-known text is a plain text format, just like GeoJSON (although, WKB is a binary form of WKT). It is often used in SQL databases to store geospatial data. Many of the data sources our R packages work with, for example [rgbif][rgbif] that interacts with <http://www.gbif.org/>, use WKT to specify geospatial extent. Thus, `rgbif` shouldn't need to import an entire spatial stack that is hard for some to install only for dealing with a single spatial data format - and only some users will do geospatial queries. We've been working on tools to make dealing with WKT lighterweight.

* Well-known text (WKT)
  * links: [specification](https://d17oy1vhnax1f7.cloudfront.net/items/291d412o1c3E3s0R112A/06-103r4_Implementation_Specification_for_Geographic_Information_-_Simple_feature_access_-_Part_1_Common_Architecture_v1.2.1%20(1).pdf) - [Wikipedia entry](https://en.wikipedia.org/wiki/Well-known_text)
  * WKT is part of [Simple Features](https://en.wikipedia.org/wiki/Simple_Features) (see `sf` below)
  * Features of note:
    * Character and binary representations
    * Supports any coordinate reference system
    * Often used in databases to store geospatial information


There are geospatial tools in R already - e.g., check out the spatial task view, and check out our [maptools taskview](https://github.com/ropensci/maptools) for mapping tools and services in R. A noteable new tool in R geospatial is the package [sf](https://github.com/edzer/sfr) (simple features for R).

-----

## rOpenSci use cases

In part to motivate our geospatial tools, we'll outline use cases for software we make that use WKT and GeoJSON. Thus, creating tools that fit our use cases makes a lot of sense. Some of our use cases:

* Web services that some of our packages interact with accept a geospatial filter as a query component. This often means WKT. Having tools that are light weight is important here as we don't need a full geospatial stack when we only need to lint WKT or create it from a bounding box, for example.
* Likewise, some web services only accept GeoJSON. Same argument as above follows here.
* Vizualize WKT and GeoJSON: given the above, users should be able to vizualize the area that they are defining with their WKT or GeoJSON.
* WKT-GeoJSON conversion: sometimes users, and we, need to convert WKT to GeoJSON, or vice versa. Light weight tools to do that task are really useful.
* others?

-----

## Tools

rOpenSci has an increasing suite of database tools (with noteable recent releases):

### GeoJSON/WKT Tools

* [geoaxe](https://github.com/ropenscilabs/geoaxe) (split up well known text into chunks)
* [geojson](https://github.com/ropensci/geojson) (geojson classes for R) (on CRAN)
* [geojsonio](https://github.com/ropensci/geojsonio) (I/O for GeoJSON)
* [geojsonlint](https://github.com/ropenscilabs/geojsonlint) (Lint GeoJSON)
* [geoops](https://github.com/ropensci/geoops) (Operations on GeoJSON, sorta like `rgeos`) (on CRAN)
* [lawn](https://github.com/ropensci/lawn) (Turf.js R client)
* [wellknown](https://github.com/ropenscilabs/wellknown) (Well-Known-Text <--> GeoJSON) (on CRAN)


### Data/Data Services

* [geoparser](https://github.com/ropenscilabs/geoparser) (Geoparser.io client for place names)
* [rgeospatialquality](https://github.com/ropenscilabs/rgeospatialquality) (spatial quality of biodiversity records) (on CRAN)
* [getlandsat](https://github.com/ropenscilabs/getlandsat) (Landsat images) (on CRAN)
* [omsplotr](https://github.com/ropenscilabs/omsplotr) (OpenStreeMap data and vizualization) (on CRAN)
* [rnaturalearth](https://github.com/ropenscilabs/rnaturalearth) (Landsat images) (on CRAN)
* [geonames](https://github.com/ropensci/geonames) (Access geonames.org API) (on CRAN)

-----------


## Get devtools

We'll need `devtools` to install some of these packages, as not all are on CRAN. If you are on Windows, see [these notes](https://github.com/hadley/devtools#updating-to-the-latest-version-of-devtools).


```r
install.packages("devtools")
```

## geojson

<a href="https://cran.rstudio.com/web/packages/geojson/"><span class="label label-warning">cran</span></a> <a href="https://github.com/ropensci/geojson"><span class="label label-info">github</span></a>

[geojson](https://github.com/ropensci/geojson) - geojson description ...

```{r eval = FALSE}
install.packages("geojson")
```

short 1 par. description of what the pkg does, how it's useful, etc.

### Example

quick example ...

```{r eval = FALSE}
library("pkg1")
"xxx"
```

## pkg2

[pkg2](https://github.com/ropensci/xxxx) - pkg2 description

```{r eval = FALSE}
install.packages("pkg2")
```

short 1 par. description of what the pkg does, how it's useful, etc.

### Example

quick example ...

```{r eval = FALSE}
library("pkg2")
"xxx"
```

## pkg3

[pkg3](https://github.com/ropensci/xxxx) - pkg3 description

```{r eval = FALSE}
install.packages("pkg3")
```

short 1 par. description of what the pkg does, how it's useful, etc.

### Example

quick example ...

```{r eval = FALSE}
library("pkg3")
"xxx"
```

## etc. for prob. not all pkgs, but major ones

-----------

## Future work

<!-- will highlight upcoming new things and improvements to existing things here -->

-----------

## Takeaway and Feedback

Our goal with our geospatial tools is to make your work -- whether it be serious reproducible science, analysis of your company's data, or just fooling around with some data --  as easy as possible with as few installation headaches as possible.

How are you using our geospatial tools? We'd love to hear about how you're using our packages, whether it be blog posts, scholarly papers, shiny apps, business use cases, etc.

Let us know if you have any feedback on these packages, and/or if you think there's anything else we should be thinking about making in this space.

[rfc7946]: https://tools.ietf.org/html/rfc7946
[rgbif]: https://github.com/ropensci/rgbif
